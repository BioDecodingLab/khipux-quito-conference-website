---
const days = [
  {
    name: "Day 1",
    theme: "Foundations & Regional Landscape",
    sessions: [
      {
        blockTime: "7:00 am",
        events: [
          { time: "7:00 AM - 8:30AM", title: "Opening & Welcome" },
          { time: "7:00 AM - 8:30AM", title: "Keynote Lecture: The future of AI in biomedical research in Latin America" },
          { time: "7:00 AM - 8:30AM", title: "Panel Discussion: Building regional capacity in AI for bio and medical imaging" },
        ],
      },
    ],
  },
  {
    name: "Day 2",
    theme: "Hands-On Workshops",
    sessions: [
      {
        blockTime: "9:00 am",
        events: [
          { time: "9:00 AM - 12:00PM", title: "Workshop: Introduction to Deep Learning for Medical Imaging" },
        ],
      },
    ],
  },
  {
    name: "Day 3",
    theme: "Hackathon & Closing",
    sessions: [
      {
        blockTime: "8:00 am",
        events: [
          { time: "8:00 AM - 5:00PM", title: "Hackathon: Open-source AI tools for regional health challenges" },
        ],
      },
    ],
  },
];
---

<section class="bg-khipu-gray text-khipu-white px-4 py-12 md:px-16">
  <h2 class="text-center text-4xl font-bold md:text-5xl mb-10">Program Overview</h2>

  <!-- Day Tabs -->
  <div class="flex gap-6 mb-2">
    {days.map((day, index) => (
      <button
        class:list={[
          "day-tab text-2xl md:text-3xl font-bold transition-colors",
          index === 0 ? "text-khipu-orange" : "text-khipu-white hover:text-khipu-orange",
        ]}
        data-day={index}
      >
        {day.name}
      </button>
    ))}
  </div>

  <!-- Separator Line -->
  <div class="w-full h-px bg-white/40 mb-8"></div>

  <!-- Day Content Panels Container -->
  <div class="h-80 md:h-96 overflow-y-auto">
    {days.map((day, index) => (
      <div
        class:list={[
          "day-panel transition-opacity duration-300 ease-out",
          index === 0 ? "opacity-100" : "opacity-0 hidden",
        ]}
        data-day-panel={index}
      >
        <!-- Day Theme -->
        <h3 class="text-center text-xl md:text-2xl font-bold mb-8">{day.theme}</h3>

        <!-- Sessions -->
        {day.sessions.map((session) => (
          <div class="mb-8">
            <!-- Time Block Header -->
            <div class="flex items-center gap-4 mb-6">
              <div class="flex-1 h-px bg-white/40"></div>
              <span class="text-xl md:text-2xl italic">{session.blockTime}</span>
              <div class="flex-1 h-px bg-white/40"></div>
            </div>

            <!-- Events -->
            <div class="flex flex-col gap-4">
              {session.events.map((event) => (
                <div class="flex gap-6 md:gap-12">
                  <span class="text-sm md:text-base text-white/80 w-32 md:w-40 shrink-0">
                    {event.time}
                  </span>
                  <span class="text-lg md:text-xl">{event.title}</span>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
    ))}
  </div>
</section>

<script>
  const tabs = document.querySelectorAll('.day-tab');
  const panels = document.querySelectorAll('.day-panel');

  tabs.forEach((tab) => {
    tab.addEventListener('click', () => {
      const dayIndex = tab.getAttribute('data-day');
      const targetPanel = document.querySelector(`[data-day-panel="${dayIndex}"]`);

      // Update tabs
      tabs.forEach((t) => {
        t.classList.remove('text-khipu-orange');
        t.classList.add('text-khipu-white');
      });
      tab.classList.add('text-khipu-orange');
      tab.classList.remove('text-khipu-white');

      // Fade out all panels
      panels.forEach((p) => {
        p.classList.add('opacity-0');
        p.classList.remove('opacity-100');
      });

      // After fade out, hide all and show target with fade in
      setTimeout(() => {
        panels.forEach((p) => p.classList.add('hidden'));
        targetPanel?.classList.remove('hidden');
        
        // Trigger reflow for animation
        requestAnimationFrame(() => {
          targetPanel?.classList.remove('opacity-0');
          targetPanel?.classList.add('opacity-100');
        });
      }, 150);
    });
  });
</script>